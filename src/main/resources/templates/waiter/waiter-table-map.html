<!doctype html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DINIO - Waiter Table Map</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <link rel="stylesheet" th:href="@{/assets/css/main.css}" />
  <link rel="stylesheet" th:href="@{/assets/css/customer/table-map.css}" />
  <link rel="stylesheet" th:href="@{/assets/css/waiter/waiter-table-map.css}" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <script th:src="@{/assets/js/header-dropdown.js}" defer></script>
  <script th:src="@{/assets/js/toast.js}" defer></script>
  <script th:src="@{/assets/js/waiter/waiter-table-map.js}" defer></script>
</head>

<body>
  <div th:replace="~{fragments/header :: header}"></div>

  <main class="container">

    <section id="tablemap-head" class="section">
      <div class="menu-container">
        <div class="menu-head-card">
        </div>
      </div>
    </section>

    <section id="tablemap-tools" class="section">
      <div class="menu-container">
        <div class="tm-toolbar">

          <div class="tm-filters">
            <div class="tm-field">
              <label for="wtFloor">Tầng</label>
              <select id="wtFloor">
                <option value="all" selected>Tất cả</option>
                <option value="floor1">Tầng 1</option>
                <option value="floor2">Tầng 2</option>
                <option value="floor3">Tầng 3</option>
                <option value="vip">VIP</option>
                <option value="outdoor">Outdoor</option>
              </select>
            </div>

            <div class="tm-field">
              <label for="wtShow">Hiển thị trên bàn</label>
              <select id="wtShow">
                <option value="none" selected>Không</option>
                <option value="seating">Seating time</option>
                <option value="reservation">Time of reservation</option>
                <option value="before_reservation">Time left before reservation</option>
                <option value="waiting">Estimated waiting time</option>
              </select>
            </div>

            <div class="tm-field">
              <label for="wtQuery">Tìm</label>
              <input id="wtQuery" type="text" placeholder="Bàn / tên khách / SĐT..." />
            </div>
          </div>

          <div class="tm-toolbar-right">
            <div class="tm-legend" aria-label="Legend">
              <span class="lg"><i class="dot is-available"></i> Trống</span>
              <span class="lg"><i class="dot is-reserved"></i> Đặt trước</span>
              <span class="lg"><i class="dot is-occupied"></i> Đang ngồi</span>
              <span class="lg"><i class="dot is-clean"></i> Chờ dọn</span>
              <span class="lg"><i class="dot is-vip"></i> VIP</span>
              <span class="lg"><i class="dot is-selected"></i> Đang chọn</span>
            </div>

            <button class="icon-btn" type="button" id="btnRefresh" title="Refresh" aria-label="Refresh">
              <i class="fa-solid fa-rotate"></i>
            </button>
          </div>

        </div>
      </div>
    </section>

    <section id="tablemap-layout" class="section">
      <div class="menu-container">

        <div class="tm-shell wt-shell">

          <div class="tm-map" aria-label="Table map">
            <div class="tm-map-head">
              <div>
                <p class="tm-kicker">Floor plan</p>
                <h3 class="tm-title">Tình trạng bàn</h3>
              </div>
            </div>

            <div class="tm-areas" id="tmAreas">

              <!-- FLOOR 1 -->
              <section class="tm-area" data-area="floor1">
                <div class="tm-area-head">
                  <h4>Tầng 1</h4>
                  <span class="tm-area-sub">Bar • Sôi động</span>
                </div>

                <div class="tm-grid">
                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T01" data-code="T01" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">T01</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T02" data-code="T02" data-seats="4" data-status="RESERVED"
                    data-res-time="18:00" data-res-name="Robert Evans" data-res-phone="0909xxxxxx">
                    <span class="t-code">T02</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>18:00</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T03" data-code="T03" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">T03</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T04" data-code="T04" data-seats="4" data-status="OCCUPIED"
                    data-seat-start="2026-01-18T18:10:00"
                    data-guest-name="William Stanley" data-guest-phone="0908xxxxxx" data-party="4">
                    <span class="t-code">T04</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T05" data-code="T05" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">T05</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T06" data-code="T06" data-seats="2" data-status="NEED_CLEAN">
                    <span class="t-code">T06</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T07" data-code="T07" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">T07</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T08" data-code="T08" data-seats="6" data-status="AVAILABLE">
                    <span class="t-code">T08</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T09" data-code="T09" data-seats="2" data-status="RESERVED"
                    data-res-time="19:00" data-res-name="Terry Brown" data-res-phone="0907xxxxxx">
                    <span class="t-code">T09</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>19:00</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T10" data-code="T10" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">T10</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T11" data-code="T11" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">T11</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button"
                    data-area="floor1" data-id="T12" data-code="T12" data-seats="6" data-status="AVAILABLE">
                    <span class="t-code">T12</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>
                </div>
              </section>

              <section class="tm-area" data-area="floor2">
                <div class="tm-area-head">
                  <h4>Tầng 2</h4>
                  <span class="tm-area-sub">Center • Cân bằng</span>
                </div>

                <div class="tm-grid">
                  <button class="tm-table" type="button" data-area="floor2" data-id="F201" data-code="F201" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">F201</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F202" data-code="F202" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">F202</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F203" data-code="F203" data-seats="4" data-status="RESERVED"
                    data-res-time="18:30" data-res-name="Dorothy Thomas" data-res-phone="0906xxxxxx">
                    <span class="t-code">F203</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>18:30</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F204" data-code="F204" data-seats="6" data-status="AVAILABLE">
                    <span class="t-code">F204</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F205" data-code="F205" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">F205</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F206" data-code="F206" data-seats="8" data-status="AVAILABLE">
                    <span class="t-code">F206</span><span class="t-meta">8 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F207" data-code="F207" data-seats="6" data-status="RESERVED"
                    data-res-time="19:30" data-res-name="James Brewer" data-res-phone="0905xxxxxx">
                    <span class="t-code">F207</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>19:30</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F208" data-code="F208" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">F208</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F209" data-code="F209" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">F209</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor2" data-id="F210" data-code="F210" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">F210</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>
                </div>
              </section>

              <section class="tm-area" data-area="floor3">
                <div class="tm-area-head">
                  <h4>Tầng 3</h4>
                  <span class="tm-area-sub">Yên tĩnh • Tầm nhìn đẹp</span>
                </div>

                <div class="tm-grid">
                  <button class="tm-table" type="button" data-area="floor3" data-id="F301" data-code="F301" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">F301</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F302" data-code="F302" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">F302</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F303" data-code="F303" data-seats="4" data-status="RESERVED"
                    data-res-time="20:00" data-res-name="Anna Lee" data-res-phone="0904xxxxxx">
                    <span class="t-code">F303</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>20:00</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F304" data-code="F304" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">F304</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F305" data-code="F305" data-seats="6" data-status="AVAILABLE">
                    <span class="t-code">F305</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F306" data-code="F306" data-seats="6" data-status="RESERVED"
                    data-res-time="20:30" data-res-name="Minh Tran" data-res-phone="0903xxxxxx">
                    <span class="t-code">F306</span><span class="t-meta">6 chỗ</span>
                    <span class="t-badge" data-badge>20:30</span>
                  </button>

                  <button class="tm-table" type="button" data-area="floor3" data-id="F307" data-code="F307" data-seats="8" data-status="AVAILABLE">
                    <span class="t-code">F307</span><span class="t-meta">8 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>
                </div>
              </section>

              <section class="tm-area" data-area="vip">
                <div class="tm-area-head">
                  <h4>VIP</h4>
                  <span class="tm-area-sub">Riêng tư • Ánh sáng ấm</span>
                </div>

                <div class="tm-grid">
                  <button class="tm-table" type="button" data-area="vip" data-id="V01" data-code="V01" data-seats="4" data-status="VIP_AVAILABLE">
                    <span class="t-code">V01</span><span class="t-meta">4 chỗ • VIP</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="vip" data-id="V02" data-code="V02" data-seats="4" data-status="VIP_AVAILABLE">
                    <span class="t-code">V02</span><span class="t-meta">4 chỗ • VIP</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="vip" data-id="V03" data-code="V03" data-seats="8" data-status="VIP_AVAILABLE">
                    <span class="t-code">V03</span><span class="t-meta">8 chỗ • VIP</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="vip" data-id="V04" data-code="V04" data-seats="10" data-status="VIP_AVAILABLE">
                    <span class="t-code">V04</span><span class="t-meta">10 chỗ • VIP</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>
                </div>
              </section>

              <section class="tm-area" data-area="outdoor">
                <div class="tm-area-head">
                  <h4>Outdoor</h4>
                  <span class="tm-area-sub">Gió trời • Thư giãn</span>
                </div>

                <div class="tm-grid">
                  <button class="tm-table" type="button" data-area="outdoor" data-id="O01" data-code="O01" data-seats="2" data-status="AVAILABLE">
                    <span class="t-code">O01</span><span class="t-meta">2 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="outdoor" data-id="O02" data-code="O02" data-seats="4" data-status="AVAILABLE">
                    <span class="t-code">O02</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>—</span>
                  </button>

                  <button class="tm-table" type="button" data-area="outdoor" data-id="O03" data-code="O03" data-seats="4" data-status="RESERVED"
                    data-res-time="18:15" data-res-name="Khanh Nguyen" data-res-phone="0902xxxxxx">
                    <span class="t-code">O03</span><span class="t-meta">4 chỗ</span>
                    <span class="t-badge" data-badge>18:15</span>
                  </button>
                </div>
              </section>

            </div>
          </div>

          <aside class="wtm-right" aria-label="Service panel">
            <div class="wtm-right-card">

              <div class="wtm-right-head">
                <div>
                  <p class="wtm-right-kicker">Now</p>
                </div>

                <button class="icon-btn" type="button" id="btnClearPick" title="Clear selection" aria-label="Clear">
                  <i class="fa-solid fa-rotate-left"></i>
                </button>
              </div>

              <div class="wtm-list" id="wtmList"></div>

              <div class="wtm-divider"></div>

              <div class="wtm-selected">
                <div class="pick-row"><span class="pick-label">Bàn</span><b id="pickTable">—</b></div>
                <div class="pick-row"><span class="pick-label">Khu vực</span><b id="pickArea">—</b></div>
                <div class="pick-row"><span class="pick-label">Khách</span><b id="pickSeats">—</b></div>
                <div class="pick-row"><span class="pick-label">Trạng thái</span><b id="pickStatus">—</b></div>
                <div class="pick-row"><span class="pick-label">Số khách</span><b id="pickGuest">—</b></div>
                <div class="pick-row"><span class="pick-label">Thời gian</span><b id="pickTime">—</b></div>
              </div>

              <div class="wtm-actions">
                <button class="btn-light" type="button" id="btnStartService" disabled>Bắt đầu phục vụ</button>
                <button class="btn-order" type="button" id="btnOpenOrder" disabled>Xem Order</button>
                <button class="btn-save" type="button" id="btnCheckout" disabled>Kết Phiên</button>
                <button class="btn-cancel" type="button" id="btnMarkCleaned" disabled>Đã dọn xong</button>
              </div>

              <p class="wtm-hint">Tip: click bàn trên map hoặc click khách bên phải để focus nhanh.</p>

            </div>
          </aside>

        </div>
      </div>
    </section>

  </main>

  <!-- IMPORTANT: modal fragment -->
  <div th:replace="~{fragments/waiter-close-session-modal :: waiterCloseSessionModal}"></div>

  <div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
